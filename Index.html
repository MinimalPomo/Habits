<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Habit Tracker</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { 
            font-family: 'Quicksand', sans-serif; 
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        .calendar-grid { 
            display: grid; 
            grid-template-columns: repeat(7, 1fr); 
            gap: 10px; 
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="bg-[#F8FAFC] text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [currentDate, setCurrentDate] = useState(new Date());
            const [habits, setHabits] = useState({});
            const [showInfo, setShowInfo] = useState(false);

            useEffect(() => {
                const saved = localStorage.getItem('minimal-habit-data');
                if (saved) setHabits(JSON.parse(saved));
            }, []);

            useEffect(() => {
                localStorage.setItem('minimal-habit-data', JSON.stringify(habits));
            }, [habits]);

            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const monthName = currentDate.toLocaleString('default', { month: 'long' });

            const toggleDay = (day) => {
                const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const currentStatus = habits[dateKey] || 'none';
                let nextStatus = currentStatus === 'none' ? 'done' : currentStatus === 'done' ? 'missed' : 'none';
                setHabits({ ...habits, [dateKey]: nextStatus });
            };

            const stats = () => {
                const prefix = `${year}-${String(month + 1).padStart(2, '0')}`;
                const keys = Object.keys(habits).filter(k => k.startsWith(prefix));
                return {
                    done: keys.filter(k => habits[k] === 'done').length,
                    missed: keys.filter(k => habits[k] === 'missed').length
                };
            };

            const days = [];
            const totalDays = new Date(year, month + 1, 0).getDate();
            const startOffset = new Date(year, month, 1).getDay();

            for (let i = 0; i < startOffset; i++) days.push(<div key={`p-${i}`} />);
            
            for (let d = 1; d <= totalDays; d++) {
                const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                const status = habits[dateKey] || 'none';
                const isToday = new Date().toDateString() === new Date(year, month, d).toDateString();
                
                let bg = 'bg-slate-100 active:bg-slate-200';
                let txt = 'text-slate-600';
                if (status === 'done') { bg = 'bg-emerald-500 shadow-md shadow-emerald-200'; txt = 'text-white font-bold'; }
                if (status === 'missed') { bg = 'bg-rose-500 shadow-md shadow-rose-200'; txt = 'text-white font-bold'; }

                days.push(
                    <button 
                        key={d} 
                        onClick={() => toggleDay(d)} 
                        className={`h-12 w-full rounded-2xl flex items-center justify-center transition-all active:scale-90 ${bg} ${txt} ${isToday && status === 'none' ? 'ring-2 ring-blue-400' : ''}`}
                    >
                        {d}
                    </button>
                );
            }

            return (
                <div className="max-w-md mx-auto p-6 animate-fade">
                    <header className="flex justify-between items-start mb-8">
                        <div className="text-left">
                            <h1 className="text-4xl font-bold text-slate-900 tracking-tight">Habits</h1>
                            <p className="text-slate-400 text-sm mt-1 font-medium">Keep moving forward.</p>
                        </div>
                        <button 
                            onClick={() => setShowInfo(!showInfo)} 
                            className="mt-1 p-3 bg-white rounded-2xl shadow-sm border border-slate-100 text-slate-400 active:bg-slate-50 transition-colors"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
                        </button>
                    </header>

                    {showInfo && (
                        <div className="mb-6 p-5 bg-white rounded-[2rem] text-sm text-slate-600 border border-slate-100 shadow-sm animate-fade">
                            <div className="space-y-2">
                                <div className="flex items-center gap-3"><div className="w-2 h-2 rounded-full bg-emerald-500"></div><span>1 Tap: Complete</span></div>
                                <div className="flex items-center gap-3"><div className="w-2 h-2 rounded-full bg-rose-500"></div><span>2 Taps: Missed</span></div>
                                <div className="flex items-center gap-3"><div className="w-2 h-2 rounded-full bg-slate-300"></div><span>3 Taps: Reset</span></div>
                            </div>
                        </div>
                    )}

                    <div className="grid grid-cols-2 gap-4 mb-8 text-left">
                        <div className="bg-white p-5 rounded-[2.5rem] border border-slate-100 shadow-sm">
                            <p className="text-[10px] text-emerald-600 uppercase font-black tracking-widest mb-1">Success</p>
                            <p className="text-3xl font-bold text-slate-800">{stats().done}</p>
                        </div>
                        <div className="bg-white p-5 rounded-[2.5rem] border border-slate-100 shadow-sm">
                            <p className="text-[10px] text-rose-600 uppercase font-black tracking-widest mb-1">Missed</p>
                            <p className="text-3xl font-bold text-slate-800">{stats().missed}</p>
                        </div>
                    </div>

                    <div className="bg-white rounded-[2.5rem] p-7 shadow-[0_10px_40px_-15px_rgba(0,0,0,0.05)] border border-slate-50">
                        <div className="flex justify-between items-center mb-8">
                            <button onClick={() => setCurrentDate(new Date(year, month - 1, 1))} className="p-2 text-slate-300 active:text-slate-600 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                            </button>
                            <h2 className="text-lg font-bold text-slate-800">{monthName} <span className="text-slate-300 font-medium ml-1">{year}</span></h2>
                            <button onClick={() => setCurrentDate(new Date(year, month + 1, 1))} className="p-2 text-slate-300 active:text-slate-600 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                            </button>
                        </div>
                        <div className="calendar-grid text-[10px] font-black text-slate-300 uppercase mb-4 text-center">
                            {['S','M','T','W','T','F','S'].map(s => <div key={s}>{s}</div>)}
                        </div>
                        <div className="calendar-grid">
                            {days}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

          </button>
        </header>

        {showInfo && (
          <div className="mb-8 p-5 bg-white dark:bg-gray-800 rounded-3xl text-sm text-gray-600 dark:text-gray-300 shadow-sm border border-gray-100 dark:border-gray-700 animate-in fade-in slide-in-from-top-4">
            <div className="space-y-3 font-medium">
              <div className="flex items-center gap-3">
                <div className="w-2 h-2 rounded-full bg-emerald-500" />
                <span>Tap once: Habit complete</span>
              </div>
              <div className="flex items-center gap-3">
                <div className="w-2 h-2 rounded-full bg-rose-500" />
                <span>Tap again: Habit missed</span>
              </div>
              <div className="flex items-center gap-3">
                <div className="w-2 h-2 rounded-full bg-gray-300" />
                <span>Tap third: Reset day</span>
              </div>
            </div>
          </div>
        )}

        {/* Stats Section */}
        <div className="grid grid-cols-2 gap-5 mb-10">
          <div className="bg-emerald-50/50 dark:bg-emerald-500/10 p-5 rounded-[2rem] border border-emerald-100 dark:border-emerald-500/20">
            <p className="text-[10px] text-emerald-600 dark:text-emerald-400 uppercase font-black tracking-widest mb-1">Success</p>
            <p className="text-3xl font-bold text-emerald-700 dark:text-emerald-300">{doneCount}</p>
          </div>
          <div className="bg-rose-50/50 dark:bg-rose-500/10 p-5 rounded-[2rem] border border-rose-100 dark:border-rose-500/20">
            <p className="text-[10px] text-rose-600 dark:text-rose-400 uppercase font-black tracking-widest mb-1">Missed</p>
            <p className="text-3xl font-bold text-rose-700 dark:text-rose-300">{missedCount}</p>
          </div>
        </div>

        {/* Calendar Card */}
        <div className="bg-white dark:bg-gray-900 rounded-[2.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.04)] dark:shadow-none p-7 border border-gray-50 dark:border-gray-800">
          
          <div className="flex items-center justify-between mb-8">
            <button onClick={handlePrevMonth} className="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all">
              <ChevronLeft className="text-gray-400" strokeWidth={3} />
            </button>
            <h2 className="text-lg font-bold text-gray-800 dark:text-gray-100">
              {monthName} <span className="text-gray-300 dark:text-gray-600 font-medium ml-1">{year}</span>
            </h2>
            <button onClick={handleNextMonth} className="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all">
              <ChevronRight className="text-gray-400" strokeWidth={3} />
            </button>
          </div>

          <div className="grid grid-cols-7 gap-3 mb-4">
            {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map((day, i) => (
              <div key={i} className="text-center text-[10px] font-black text-gray-300 dark:text-gray-600">
                {day}
              </div>
            ))}
          </div>

          <div className="grid grid-cols-7 gap-3">
            {calendarDays}
          </div>
        </div>

        {/* Legend */}
        <div className="mt-10 flex justify-center gap-8 text-[11px] font-bold text-gray-400 dark:text-gray-600">
          <span className="flex items-center gap-2">
            <span className="w-1.5 h-1.5 rounded-full bg-emerald-500" /> DONE
          </span>
          <span className="flex items-center gap-2">
            <span className="w-1.5 h-1.5 rounded-full bg-rose-500" /> MISSED
          </span>
        </div>
      </div>
    </div>
  );
};

export default App = HabitTracker;


